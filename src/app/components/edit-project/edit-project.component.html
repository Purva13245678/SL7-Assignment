<div mat-dialog-title class="dialog-header">
  <div class="title-content">
    <mat-icon>edit</mat-icon>
    <h2>Edit Project</h2>
  </div>
</div>

<form [formGroup]="editForm" (ngSubmit)="onSave()">
  <mat-dialog-content class="dialog-content">
    <div class="form-sections">
      <!-- Basic Information Section -->
      <section class="form-section">
        <h3>Basic Information</h3>
        
        <div class="form-row">
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Project Name</mat-label>
            <input matInput formControlName="name" placeholder="Enter project name">
            <mat-error *ngIf="editForm.get('name')?.hasError('required')">
              Project name is required
            </mat-error>
            <mat-error *ngIf="editForm.get('name')?.hasError('minlength')">
              Project name must be at least 3 characters long
            </mat-error>
          </mat-form-field>
        </div>

        <div class="form-row">
          <mat-form-field appearance="outline" class="half-width">
            <mat-label>Owner</mat-label>
            <input matInput formControlName="owner" placeholder="Project owner">
            <mat-error *ngIf="editForm.get('owner')?.hasError('required')">
              Owner is required
            </mat-error>
          </mat-form-field>

          <mat-form-field appearance="outline" class="half-width">
            <mat-label>Status</mat-label>
            <mat-select formControlName="status">
              <mat-option value="Active">Active</mat-option>
              <mat-option value="On Hold">On Hold</mat-option>
              <mat-option value="Completed">Completed</mat-option>
            </mat-select>
            <mat-error *ngIf="editForm.get('status')?.hasError('required')">
              Status is required
            </mat-error>
          </mat-form-field>
        </div>

        <div class="form-row">
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Description</mat-label>
            <textarea matInput formControlName="description" rows="3" placeholder="Project description"></textarea>
            <mat-error *ngIf="editForm.get('description')?.hasError('required')">
              Description is required
            </mat-error>
            <mat-error *ngIf="editForm.get('description')?.hasError('minlength')">
              Description must be at least 10 characters long
            </mat-error>
          </mat-form-field>
        </div>

        <div class="form-row">
          <div class="progress-section">
            <label class="progress-label">Progress: {{ editForm.get('progress')?.value || 0 }}%</label>
            <mat-slider min="0" max="100" step="5" class="progress-slider">
              <input matSliderThumb formControlName="progress">
            </mat-slider>
          </div>
        </div>
      </section>

      <mat-divider></mat-divider>

      <!-- Tags Section -->
      <section class="form-section">
        <h3>Tags</h3>
        <div class="tags-container">
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Tags</mat-label>
            <mat-chip-grid #chipGrid>
              <mat-chip-row *ngFor="let tag of tags" (removed)="removeTag(tag)">
                {{ tag }}
                <button matChipRemove>
                  <mat-icon>cancel</mat-icon>
                </button>
              </mat-chip-row>
            </mat-chip-grid>
            <input placeholder="Add tag..."
                   [matChipInputFor]="chipGrid"
                   [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
                   (matChipInputTokenEnd)="addTag($event)">
          </mat-form-field>
        </div>
      </section>

      <mat-divider></mat-divider>

      <!-- Team Management Section -->
      <section class="form-section">
        <h3>Team Management</h3>
        
        <div class="team-section">
          <div class="current-team">
            <h4>Current Team Members</h4>
            <div class="team-list" *ngIf="projectTeamMembers.length > 0; else noTeamMembers">
              <div class="team-member" *ngFor="let member of projectTeamMembers">
                <mat-icon class="member-icon">person</mat-icon>
                <span class="member-name">{{ member.name }}</span>
                <button mat-icon-button color="warn" (click)="removeTeamMember(member)" type="button">
                  <mat-icon>remove_circle</mat-icon>
                </button>
              </div>
            </div>
            <ng-template #noTeamMembers>
              <p class="no-members">No team members assigned</p>
            </ng-template>
          </div>

          <div class="available-employees">
            <h4>Available Employees</h4>
            <div class="employee-list" *ngIf="availableEmployees.length > 0; else noAvailableEmployees">
              <div class="employee-item" *ngFor="let employee of availableEmployees">
                <mat-icon class="member-icon">person</mat-icon>
                <span class="member-name">{{ employee.name }}</span>
                <button mat-icon-button color="primary" (click)="addTeamMember(employee)" type="button">
                  <mat-icon>add_circle</mat-icon>
                </button>
              </div>
            </div>
            <ng-template #noAvailableEmployees>
              <p class="no-members">All employees are assigned</p>
            </ng-template>
          </div>
        </div>
      </section>
    </div>
  </mat-dialog-content>

  <mat-dialog-actions align="end">
    <button mat-button type="button" (click)="onCancel()">Cancel</button>
    <button mat-raised-button color="primary" type="submit" [disabled]="!editForm.valid">
      Save Changes
    </button>
  </mat-dialog-actions>
</form>
